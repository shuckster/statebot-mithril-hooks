/*
 * Statebot Mithril Hooks
 * v1.1.0
 * https://shuckster.github.io/statebot/
 * License: ISC
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("mithril-hooks"),e=require("statebot");function o(e){const[o,n]=t.useState(e.currentState());return t.useEffect(()=>{let t=!1;const o=e.onSwitched(e=>{t||n(e)});return()=>{t=!0,o()}},[e]),o}exports.useStatebot=o,exports.useStatebotEvent=function(e,o,n,r){t.useEffect(()=>{let t=!1;const s="function"==typeof r?[n,function(...e){t||r(...e)}]:[function(...e){t||n(...e)}],u=e[o](...s);return()=>{t=!0,u()}},[e,o,n,r])},exports.useStatebotFactory=function(n,r){const{bot:s,listeners:u}=t.useMemo(()=>{const{performTransitions:t={},onTransitions:o={},...s}=r||{},u=e.Statebot(n,s),i=[u.performTransitions(t),u.onTransitions(o)];return{bot:u,listeners:i}},[]);return t.useEffect(()=>()=>{"function"==typeof s.pause&&s.pause(),u.forEach(t=>t())},[s,u]),{state:o(s),bot:s}};
